======================================================================
测试数据集样本
======================================================================

📚 测试训练集 (train)
--------------------------------------------------
corpus_dir: ./corpus
aligned_dir: ./corpus_aligned
processed_dir: ./processed_data
预处理 train 数据...
数据集大小: 2
从所有TextGrid文件构建音素词表...
Building phoneme vocabulary:   0%|          | 0/13100 [00:00<?, ?it/s]Building phoneme vocabulary:   1%|          | 107/13100 [00:00<00:12, 1065.73it/s]Building phoneme vocabulary:   2%|▏         | 217/13100 [00:00<00:11, 1083.30it/s]Building phoneme vocabulary:   3%|▎         | 333/13100 [00:00<00:11, 1116.09it/s]Building phoneme vocabulary:   3%|▎         | 450/13100 [00:00<00:11, 1135.82it/s]Building phoneme vocabulary:   4%|▍         | 564/13100 [00:00<00:11, 1112.76it/s]Building phoneme vocabulary:   5%|▌         | 676/13100 [00:00<00:11, 1102.46it/s]Building phoneme vocabulary:   6%|▌         | 787/13100 [00:00<00:11, 1092.83it/s]Building phoneme vocabulary:   7%|▋         | 900/13100 [00:00<00:11, 1102.03it/s]Building phoneme vocabulary:   8%|▊         | 1012/13100 [00:00<00:10, 1106.11it/s]Building phoneme vocabulary:   9%|▊         | 1131/13100 [00:01<00:10, 1127.62it/s]Building phoneme vocabulary:  10%|▉         | 1247/13100 [00:01<00:10, 1133.64it/s]Building phoneme vocabulary:  10%|█         | 1370/13100 [00:01<00:10, 1157.99it/s]Building phoneme vocabulary:  11%|█▏        | 1486/13100 [00:01<00:10, 1139.41it/s]Building phoneme vocabulary:  12%|█▏        | 1601/13100 [00:01<00:10, 1141.27it/s]Building phoneme vocabulary:  13%|█▎        | 1716/13100 [00:01<00:09, 1142.42it/s]Building phoneme vocabulary:  14%|█▍        | 1831/13100 [00:01<00:10, 1126.22it/s]Building phoneme vocabulary:  15%|█▍        | 1944/13100 [00:01<00:09, 1116.04it/s]Building phoneme vocabulary:  16%|█▌        | 2061/13100 [00:01<00:09, 1130.72it/s]Building phoneme vocabulary:  17%|█▋        | 2188/13100 [00:01<00:09, 1170.42it/s]Building phoneme vocabulary:  18%|█▊        | 2316/13100 [00:02<00:08, 1199.37it/s]Building phoneme vocabulary:  19%|█▊        | 2446/13100 [00:02<00:08, 1228.01it/s]Building phoneme vocabulary:  20%|█▉        | 2569/13100 [00:02<00:08, 1213.87it/s]Building phoneme vocabulary:  21%|██        | 2691/13100 [00:02<00:08, 1203.89it/s]Building phoneme vocabulary:  21%|██▏       | 2816/13100 [00:02<00:08, 1216.26it/s]Building phoneme vocabulary:  22%|██▏       | 2942/13100 [00:02<00:08, 1227.88it/s]Building phoneme vocabulary:  23%|██▎       | 3065/13100 [00:02<00:08, 1214.90it/s]Building phoneme vocabulary:  24%|██▍       | 3190/13100 [00:02<00:08, 1223.73it/s]Building phoneme vocabulary:  25%|██▌       | 3313/13100 [00:02<00:08, 1190.08it/s]Building phoneme vocabulary:  26%|██▋       | 3439/13100 [00:02<00:08, 1206.87it/s]Building phoneme vocabulary:  27%|██▋       | 3570/13100 [00:03<00:07, 1235.17it/s]Building phoneme vocabulary:  28%|██▊       | 3696/13100 [00:03<00:07, 1241.28it/s]Building phoneme vocabulary:  29%|██▉       | 3825/13100 [00:03<00:07, 1255.18it/s]Building phoneme vocabulary:  30%|███       | 3951/13100 [00:03<00:07, 1255.03it/s]Building phoneme vocabulary:  31%|███       | 4078/13100 [00:03<00:07, 1258.75it/s]Building phoneme vocabulary:  32%|███▏      | 4205/13100 [00:03<00:07, 1260.79it/s]Building phoneme vocabulary:  33%|███▎      | 4334/13100 [00:03<00:06, 1268.24it/s]Building phoneme vocabulary:  34%|███▍      | 4461/13100 [00:03<00:06, 1259.93it/s]Building phoneme vocabulary:  35%|███▌      | 4595/13100 [00:03<00:06, 1283.20it/s]Building phoneme vocabulary:  36%|███▌      | 4724/13100 [00:03<00:06, 1274.60it/s]Building phoneme vocabulary:  37%|███▋      | 4852/13100 [00:04<00:06, 1257.79it/s]Building phoneme vocabulary:  38%|███▊      | 4982/13100 [00:04<00:06, 1269.97it/s]Building phoneme vocabulary:  39%|███▉      | 5118/13100 [00:04<00:06, 1296.10it/s]Building phoneme vocabulary:  40%|████      | 5250/13100 [00:04<00:06, 1300.52it/s]Building phoneme vocabulary:  41%|████      | 5388/13100 [00:04<00:05, 1320.16it/s]Building phoneme vocabulary:  42%|████▏     | 5521/13100 [00:04<00:05, 1319.73it/s]Building phoneme vocabulary:  43%|████▎     | 5654/13100 [00:04<00:05, 1288.83it/s]Building phoneme vocabulary:  44%|████▍     | 5784/13100 [00:04<00:05, 1255.33it/s]Building phoneme vocabulary:  45%|████▌     | 5912/13100 [00:04<00:05, 1258.78it/s]Building phoneme vocabulary:  46%|████▌     | 6047/13100 [00:04<00:05, 1284.81it/s]Building phoneme vocabulary:  47%|████▋     | 6184/13100 [00:05<00:05, 1309.82it/s]Building phoneme vocabulary:  48%|████▊     | 6322/13100 [00:05<00:05, 1330.24it/s]Building phoneme vocabulary:  49%|████▉     | 6462/13100 [00:05<00:04, 1350.34it/s]Building phoneme vocabulary:  50%|█████     | 6613/13100 [00:05<00:04, 1394.54it/s]Building phoneme vocabulary:  52%|█████▏    | 6761/13100 [00:05<00:04, 1417.39it/s]Building phoneme vocabulary:  53%|█████▎    | 6903/13100 [00:05<00:04, 1365.51it/s]Building phoneme vocabulary:  54%|█████▎    | 7040/13100 [00:05<00:04, 1327.08it/s]Building phoneme vocabulary:  55%|█████▍    | 7174/13100 [00:05<00:04, 1315.31it/s]Building phoneme vocabulary:  56%|█████▌    | 7307/13100 [00:05<00:04, 1318.82it/s]Building phoneme vocabulary:  57%|█████▋    | 7443/13100 [00:06<00:04, 1328.35it/s]Building phoneme vocabulary:  58%|█████▊    | 7577/13100 [00:06<00:04, 1327.27it/s]Building phoneme vocabulary:  59%|█████▉    | 7710/13100 [00:06<00:04, 1326.43it/s]Building phoneme vocabulary:  60%|█████▉    | 7843/13100 [00:06<00:04, 1301.66it/s]Building phoneme vocabulary:  61%|██████    | 7974/13100 [00:06<00:03, 1284.03it/s]Building phoneme vocabulary:  62%|██████▏   | 8103/13100 [00:06<00:03, 1280.34it/s]Building phoneme vocabulary:  63%|██████▎   | 8238/13100 [00:06<00:03, 1300.62it/s]Building phoneme vocabulary:  64%|██████▍   | 8369/13100 [00:06<00:03, 1277.29it/s]Building phoneme vocabulary:  65%|██████▍   | 8497/13100 [00:06<00:03, 1275.60it/s]Building phoneme vocabulary:  66%|██████▌   | 8625/13100 [00:06<00:03, 1250.56it/s]Building phoneme vocabulary:  67%|██████▋   | 8751/13100 [00:07<00:03, 1233.73it/s]Building phoneme vocabulary:  68%|██████▊   | 8876/13100 [00:07<00:03, 1235.56it/s]Building phoneme vocabulary:  69%|██████▊   | 9000/13100 [00:07<00:03, 1233.61it/s]Building phoneme vocabulary:  70%|██████▉   | 9124/13100 [00:07<00:03, 1231.82it/s]Building phoneme vocabulary:  71%|███████   | 9248/13100 [00:07<00:03, 1231.22it/s]Building phoneme vocabulary:  72%|███████▏  | 9380/13100 [00:07<00:02, 1257.24it/s]Building phoneme vocabulary:  73%|███████▎  | 9519/13100 [00:07<00:02, 1295.72it/s]Building phoneme vocabulary:  74%|███████▎  | 9654/13100 [00:07<00:02, 1307.63it/s]Building phoneme vocabulary:  75%|███████▍  | 9785/13100 [00:07<00:02, 1290.90it/s]Building phoneme vocabulary:  76%|███████▌  | 9916/13100 [00:07<00:02, 1293.51it/s]Building phoneme vocabulary:  77%|███████▋  | 10048/13100 [00:08<00:02, 1298.14it/s]Building phoneme vocabulary:  78%|███████▊  | 10178/13100 [00:08<00:02, 1287.21it/s]Building phoneme vocabulary:  79%|███████▊  | 10311/13100 [00:08<00:02, 1298.22it/s]Building phoneme vocabulary:  80%|███████▉  | 10441/13100 [00:08<00:02, 1293.34it/s]Building phoneme vocabulary:  81%|████████  | 10571/13100 [00:08<00:01, 1285.32it/s]Building phoneme vocabulary:  82%|████████▏ | 10700/13100 [00:08<00:01, 1272.70it/s]Building phoneme vocabulary:  83%|████████▎ | 10828/13100 [00:08<00:01, 1236.66it/s]Building phoneme vocabulary:  84%|████████▎ | 10952/13100 [00:08<00:01, 1234.50it/s]Building phoneme vocabulary:  85%|████████▍ | 11078/13100 [00:08<00:01, 1240.77it/s]Building phoneme vocabulary:  86%|████████▌ | 11204/13100 [00:08<00:01, 1244.70it/s]Building phoneme vocabulary:  87%|████████▋ | 11333/13100 [00:09<00:01, 1257.81it/s]Building phoneme vocabulary:  87%|████████▋ | 11459/13100 [00:09<00:01, 1252.98it/s]Building phoneme vocabulary:  88%|████████▊ | 11585/13100 [00:09<00:01, 1236.74it/s]Building phoneme vocabulary:  89%|████████▉ | 11710/13100 [00:09<00:01, 1240.39it/s]Building phoneme vocabulary:  90%|█████████ | 11837/13100 [00:09<00:01, 1247.88it/s]Building phoneme vocabulary:  91%|█████████▏| 11968/13100 [00:09<00:00, 1264.84it/s]Building phoneme vocabulary:  92%|█████████▏| 12095/13100 [00:09<00:00, 1264.96it/s]Building phoneme vocabulary:  93%|█████████▎| 12224/13100 [00:09<00:00, 1269.16it/s]Building phoneme vocabulary:  94%|█████████▍| 12352/13100 [00:09<00:00, 1271.83it/s]Building phoneme vocabulary:  95%|█████████▌| 12480/13100 [00:10<00:00, 1270.13it/s]Building phoneme vocabulary:  96%|█████████▌| 12608/13100 [00:10<00:00, 1264.12it/s]Building phoneme vocabulary:  97%|█████████▋| 12735/13100 [00:10<00:00, 1255.46it/s]Building phoneme vocabulary:  98%|█████████▊| 12861/13100 [00:10<00:00, 1252.22it/s]Building phoneme vocabulary:  99%|█████████▉| 12989/13100 [00:10<00:00, 1258.17it/s]Building phoneme vocabulary: 100%|██████████| 13100/13100 [00:10<00:00, 1247.38it/s]
✓ 构建了包含 70 个音素的词表
开始预处理样本...
Processing train:   0%|          | 0/2 [00:00<?, ?it/s]Processing train:  50%|█████     | 1/2 [00:00<00:00,  1.14it/s]Processing train: 100%|██████████| 2/2 [00:00<00:00,  2.27it/s]
Traceback (most recent call last):
  File "/Users/ailabuser7-1/Documents/cursor-workspace/stratch_models/train_model/audio/fastspeech2/test_datasets.py", line 22, in test_dataset_samples
    train_dataset = LJSpeechDataset(
  File "/Users/ailabuser7-1/Documents/cursor-workspace/stratch_models/train_model/audio/fastspeech2/fastspeech2_dataset.py", line 303, in __init__
    'pitch_min': float(np.min(pitch_values)),
  File "/Users/ailabuser7-1/miniconda3/envs/scratch-models/lib/python3.10/site-packages/numpy/_core/fromnumeric.py", line 3302, in min
    return _wrapreduction(a, np.minimum, 'min', axis, None, out,
  File "/Users/ailabuser7-1/miniconda3/envs/scratch-models/lib/python3.10/site-packages/numpy/_core/fromnumeric.py", line 86, in _wrapreduction
    return ufunc.reduce(obj, axis, dtype, out, **passkwargs)
ValueError: zero-size array to reduction operation minimum which has no identity
--------------------------------
idx: 0
mel.shape: (832, 80)
pitch.shape: (832,)
energy.shape: (832,)

警告: 样本 0 处理失败: 'list' object has no attribute 'sum'
--------------------------------
idx: 1
mel.shape: (164, 80)
pitch.shape: (164,)
energy.shape: (164,)

警告: 样本 1 处理失败: 'list' object has no attribute 'sum'

✓ 成功处理 0 个样本
✓ Tokenizer 已保存: ./processed_data/tokenizer.json
  词表大小: 74
✗ 测试失败: zero-size array to reduction operation minimum which has no identity
